
function previewImage(event) {
    const input = event.target;
    const file = input.files[0];

    if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            const img = document.getElementById('prev-image');
            img.src = e.target.result;
            img.style.display = 'block'; // Mostrar la imagen
        };
        reader.readAsDataURL(file);
    }
}

document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.menu-button').forEach(button => {
        button.addEventListener('click', function () {
            button.querySelector('.menu-submenu').style.display = 'flex';
        });
    });
});

document.addEventListener('change', function (e) {
    if (e.target.closest('#fileInput')) {
        previewImage(e);
    }
});

document.addEventListener('click', function (e) {
    if (!e.target.closest('.menu-button')) {
        document.querySelectorAll('.menu-submenu').forEach(el => el.style.display = 'none');
    }
});

document.addEventListener("show.bs.modal", function (event) {
    const openModals = document.querySelectorAll(".modal.show");
    if (openModals.length > 0) {
        const zIndex = 1050 + (10 * openModals.length); // base 1050, sumamos por cada modal abierto
        const modal = event.target;
        modal.style.zIndex = zIndex;

        // Ajustar el backdrop tambiÃ©n
        setTimeout(() => {
            const backdrops = document.querySelectorAll(".modal-backdrop");
            backdrops[backdrops.length - 1].style.zIndex = zIndex - 1;
        });
    }
});